<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

    <!-- 
    =====================================================
    ADJUSTMENT BOOK
    =====================================================
    -->

        <record id="view_adjustment_book_line_line_form" model="ir.ui.view">
            <field name="name">adjustment.book.line.form</field>
            <field name="model">adjustment.book.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Adjustment Book Line">
                    <group col="4" colspan="4">
                        <field name="date_accounting" select="1"/>
                        <field name="date_admin" select="1"/>
                        <field name="vat" select="1"/>
                        <field name="partner" select="1"/>
                        <field name="invoice_number" select="1"/>
                        <field name="control_number" select="1"/>
                        <field name="amount"/>
                        <field name="type_doc"/>
                        <field name="doc_affected"/>
                        <field name="uncredit_fiscal"/>
                        <field name="amount_with_vat"/>
                        <field name="voucher"/>
                    </group>
                    <newline/>
                    <separator string="National Operations" colspan="6"/>
                    <newline/>
                    <group col="4" colspan="4">
                        <field name="amount_untaxed_n"/>
                        <field name="percent_with_vat_n"/>
                        <field name="amount_with_vat_n"/>
                    </group>
                    <newline/>
                    <separator string="International Operations" colspan="6"/>
                    <newline/>
                    <group col="4" colspan="4">
                        <field name="amount_untaxed_i"/>
                        <field name="percent_with_vat_i"/>
                        <field name="amount_with_vat_i"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="view_adjustment_book_tree" model="ir.ui.view">
            <field name="name">adjustment.book.tree</field>
            <field name="model">adjustment.book</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Adjustment Book">
                    <field name="name"/>
                    <field name="type"/>
                    <field name="period_id"/>
                    <field name="note"/>
                </tree>
            </field>
        </record>

        <record id="view_adjustment_book_line_tree" model="ir.ui.view">
            <field name="name">adjustment.book.line.tree</field>
            <field name="model">adjustment.book.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Adjustment Book Line">
                    <field name="date_accounting"/>
                    <field name="date_admin"/>
                    <field name="vat"/>
                    <field name="partner"/>
                    <field name="invoice_number"/>
                    <field name="control_number"/>
                    <field name="amount"/>
                    <field name="type_doc"/>
                    <field name="uncredit_fiscal"/>
                    <field name="doc_affected"/>
                    <field name="amount_untaxed_n"/>
                    <field name="percent_with_vat_n"/>
                    <field name="amount_with_vat_n"/>
                    <field name="amount_untaxed_i"/>
                    <field name="percent_with_vat_i"/>
                    <field name="amount_with_vat_i"/>
                </tree>
            </field>
        </record>

        <record id="view_adjustment_bookr_form" model="ir.ui.view">
            <field name="name">adjustment.book.form</field>
            <field name="model">adjustment.book</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Adjustment Book">
                    <group col="6" colspan="6">
                        <field name="name" select="1"/>
                        <field name="type" select="1"/>
                        <field name="period_id" select="1"/>
                    </group>
                    <notebook colspan="8">
                        <page string="Adjustment Book Lines">
                            <field name="adjustment_ids" nolabel="1" colspan='4'/>
                            <group col="8" colspan="8">
                                <field name="amount_total"/>
                                <field name="uncredit_fiscal_total"/>
                                <field name="amount_with_vat_total"/>
                                <hpaned/>
                                <hpaned/>
                            </group>
                            <group col="8" colspan="8">
                                <field name="amount_untaxed_n_total"/>
                                <field name="amount_with_vat_n_total"/>
                                <field name="amount_untaxed_i_total"/>
                                <field name="amount_with_vat_i_total"/>
                            </group>
                        <group col="4" colspan="4">
                            <separator string="Explanation about this adjustment"/>
                            <newline/>
                            <field name="note" nolabel="1"/>
                        </group>
                        </page>
                        <page string="Totales">
                            <group colspan="4" col="6">
                            <field name="no_grav" colspan="4"/>
                            </group>
                            <notebook colspan="8">
                                <page string="Base Imponible" >
                                    <group colspan="4" col="6">
                                        <group colspan="4" col="2">
                                        <separator string="Internacionales" colspan="4"/>
                                        <field name="vat_general_i" attrs="{'readonly':[('type','=','sale')]}"/>
                                        <field name="vat_general_add_i" attrs="{'readonly':[('type','=','sale')]}"/>
                                        <field name="vat_reduced_i" attrs="{'readonly':[('type','=','sale')]}"/>
                                        <field name="sale_export" attrs="{'readonly':[('type','=','purchase')]}"/>
                                        </group>
                                        <group colspan="1" col="2">
                                        <separator string="Nacionales" colspan="2"/>
                                        <field name="vat_general_n"/>
                                        <field name="vat_general_add_n"/>
                                        <field name="vat_reduced_n"/>
                                        </group>
                                        <group colspan="1" col="2">
                                        <separator string="Total y Ajuste" colspan="2"/>
                                        <field name="adjustment" colspan="4"/>
                                        <field name="amount_base_total" colspan="4"/>
                                        </group>
                                    </group>
                                </page>
                            </notebook>
                            <notebook colspan="8">
                                <page string="Porcentaje Fiscal" >
                                    <group colspan="4" col="6">
                                        <group colspan="4" col="2">
                                        <separator string="Internacionales" colspan="4"/>
                                        <field name="vat_general_icf" attrs="{'readonly':[('type','=','sale')]}"/>
                                        <field name="vat_general_add_icf" attrs="{'readonly':[('type','=','sale')]}"/>
                                        <field name="vat_reduced_icf" attrs="{'readonly':[('type','=','sale')]}"/>
                                        <field name="sale_export_cf" attrs="{'readonly':[('type','=','purchase')]}"/>
                                        </group>
                                        <group colspan="1" col="2">
                                        <separator string="Nacionales" colspan="2"/>
                                        <field name="vat_general_ncf"/>
                                        <field name="vat_general_add_ncf"/>
                                        <field name="vat_reduced_ncf"/>
                                        </group>
                                        <group colspan="1" col="2">
                                        <separator string="Total y Ajuste" colspan="2"/>
                                        <field name="adjustment_cf" colspan="4"/>
                                        <field name="amount_percent_total" colspan="4"/>
                                        </group>
                                    </group>
                                </page>
                            </notebook>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

      <record model="ir.actions.act_window" id="action_adjustment_book">
            <field name="name">Adjustment Book</field>
            <field name="res_model">adjustment.book</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <record model="ir.actions.act_window.view" id="action_adjustment_book_tree">
            <field name="sequence" eval="10"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_adjustment_book_tree"/> 
            <field name="act_window_id" ref="action_adjustment_book"/>
        </record>
        <record model="ir.actions.act_window.view" id="action_adjustment_book_form">
            <field name="sequence" eval="20"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_adjustment_bookr_form"/>
            <field name="act_window_id" ref="action_adjustment_book"/>
        </record>
        
        <menuitem name="Adjustment Book" 
            id="menu_adjustment_book" 
            parent="l10n_ve_fiscal_reports.menu_fr_main"
            action="action_adjustment_book"/>

    </data>
</openerp>





