<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<record model="ir.ui.view" id="view_voucher_caja_chica_tree">
			<field name="name">account.voucher.tree</field>
			<field name="model">account.voucher</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Vouchers">
					<field name="name"/>
					<field name="journal_id"/>
					<field name="account_id" />
					<field name="amount"/>
					<field name="date"/>
					<field name="period_id"/>
				</tree>
			</field>
		</record>
		
		<record model="ir.ui.view" id="view_voucher_caja_chica_form">
			<field name="name">account.voucher.form</field>
			<field name="model">account.voucher</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Voucher">
				    <group col="6" colspan="4">
				        <field name="name" select="1" colspan="4"/>
				        <field name="journal_id" select="1" on_change="onchange_journal(journal_id,type)"/>
					    <field name="account_id" select="2" on_change="onchange_account(account_id)"/>
					    <field name="type" select="2" on_change="onchange_journal(journal_id,type)"/>
					    <field name="number"/>
					</group>
					<group col="2" colspan="2">
                        <button name="%(wizard_caja_chica)d" states="draft" string="Pago caja chica" type="action"/>
                        <button name="button_reset_line" string="Agregar Facturas" states="draft" type="object" icon="gtk-go-forward"/>
                    </group>					
					<notebook colspan="4">
						<page string="Entry Lines">
							<field name="voucher_line_ids"  default_get="{'lines': voucher_line_ids }" colspan="4" nolabel="1" height="275">
								<tree string="Voucher Lines" editable="top">
							        <!--<field name="account_analytic_id"/>
							        <field name="ref"/>
							        <field name="type"/>-->
							        <field name="invoice_id" on_change="onchange_invoice_id(invoice_id)" domain="[('state','=','open'),('residual','&gt;',0.0),('type','=','in_invoice'),('caj_chi','=',1)]"/>							        
							        <field name="partner_id"/>
							        <field name="account_id"/>
							        <field name="name"/>							        
							        <field name="amount"/>							        
								</tree>
							</field>
							<separator string="Narration" colspan="4"/>
							<field name="narration" colspan="4" nolabel="1"/>
							<group col="6" colspan="6">
								<field name="state"/>
								<button name="open_voucher" string="Pro-forma" states="draft" type="object" icon="gtk-open"/>
								<button name="proforma_voucher" string="Create" states="proforma" type="object"  icon="gtk-go-forward"/>
								<button name="cancel_voucher" string="Cancel" states="draft,proforma,posted" type="object" icon="gtk-cancel"/>
								<button name="action_cancel_draft" states="cancel" type="object" string="Set to Draft" icon="gtk-convert"/>
							</group>
						</page>
						<page string="Other Info">
							<field name="company_id" select="1"/>
							<field name="currency_id" select="1" />
							<field name="period_id"/>
							<field name="date" select="1"/>
							<separator string="General Entries" colspan="4"/>
							<field name="move_ids" colspan="4" nolabel="1" readonly="1"/>
						</page>
					</notebook>
				</form>
			</field>
		</record>

		
		<!-- Payment Vouchers -->
		<record model="ir.actions.act_window" id="action_caja_chica_list">
			<field name="name">Comprobantes de caja chica</field>
			<field name="res_model">account.voucher</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('type','like','pay_voucher'),('caj_chi','=',1)]</field>
			<field name="context">{'type':'pay_voucher','caj_chi':True}</field>
		</record>
        <record id="action_caja_chica_form_view_t" model="ir.actions.act_window.view">
            <field eval="10" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_voucher_caja_chica_tree"/>
            <field name="act_window_id" ref="action_caja_chica_list"/>
        </record>
        <record id="action_caja_chica_form_view_f" model="ir.actions.act_window.view">
            <field eval="20" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_voucher_caja_chica_form"/>
            <field name="act_window_id" ref="action_caja_chica_list"/>
        </record>		
		<menuitem id="menu_action_caja_chica_list" action="action_caja_chica_list" parent="account_voucher.menu_action_voucher_list"/>
		
		
		
		<record model="ir.actions.act_window" id="action_caja_chica_cash_list">
			<field name="name">Pagos en efectivo</field>
			<field name="res_model">account.voucher</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('type','=','pay_voucher'),('caj_chi','=',1)]</field>
			<field name="context">{'type':'pay_voucher','caj_chi':True}</field>
		</record>
        <record id="action_caja_chica_form_view_t" model="ir.actions.act_window.view">
            <field eval="10" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_voucher_caja_chica_tree"/>
            <field name="act_window_id" ref="action_caja_chica_cash_list"/>
        </record>
        <record id="action_caja_chica_form_view_f" model="ir.actions.act_window.view">
            <field eval="20" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_voucher_caja_chica_form"/>
            <field name="act_window_id" ref="action_caja_chica_cash_list"/>
        </record>		
		<menuitem id="menu_action_caja_chica_cash_list" action="action_caja_chica_cash_list" parent="menu_action_caja_chica_list"/>
		
		<record model="ir.actions.act_window" id="action_caja_chica_cash_form">
			<field name="name">Nuevo pago</field>
			<field name="res_model">account.voucher</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="view_id" eval="view_voucher_caja_chica_form"/>
			<field name="domain">[('type','=','pay_voucher'),('caj_chi','=',1)]</field>
			<field name="context">{'type':'pay_voucher','caj_chi':True}</field>
		</record>
		<menuitem id="menu_action_caja_chica_cash_form" action="action_caja_chica_cash_form" parent="menu_action_caja_chica_cash_list"/>






<!--	
		<record model="ir.actions.act_window" id="action_payments_bankpay_voucher_list">
			<field name="name">Payment Vouchers</field>
			<field name="res_model">account.voucher</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" eval="view_voucher_caja_chica_tree"/>
			<field name="domain">[('type','=','bank_pay_voucher')]</field>
			<field name="context">{'type':'bank_pay_voucher'}</field>
		</record>
		<menuitem name="Financial Management/Voucher Entries/Payment Vouchers/Bank Payments" 
		id="menu_action_payments_bankpay_voucher_list" action="action_payments_bankpay_voucher_list"/>
		
		<record model="ir.actions.act_window" id="action_view_bank_pay_voucher_form">
			<field name="name">Bank Payment Voucher</field>
			<field name="res_model">account.voucher</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="view_id" eval="view_voucher_caja_chica_form"/>
			<field name="domain">[('type','=','bank_pay_voucher')]</field>
			<field name="context">{'type':'bank_pay_voucher'}</field>
		</record>
		<menuitem name="Financial Management/Voucher Entries/Payment Vouchers/Bank Payments/New Bank Payment" id="menu_action_view_bank_pay_voucher_form" action="action_view_bank_pay_voucher_form"/>
-->		
		<!-- End Payment Vouchers -->
		

		</data>
</openerp>
