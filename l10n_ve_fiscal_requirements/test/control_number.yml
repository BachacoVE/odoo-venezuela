-
  1. Control number tests
-
  1.1 Before creating the invoice let's open the period
-
  !python {model: account.period}: |
    import time
    ap_ids = self.search(cr, uid, [('code', '=',time.strftime('%m/%Y'))])
    assert ap_ids, 'There are no periods for the current date'
    self.action_draft(cr, uid, ap_ids)
    inv_brw = self.browse(cr, uid, ap_ids)
    for ap in inv_brw:
        assert ap.state == 'draft', 'Period couldn\'t be oppened'
-
  1.2 I create IVA sale tax (withholdable)
-
  !record {model: account.tax, id: iva_sale1}:
    name: 'IVA - Sale (withholdable)'
    amount: 0.12
    type_tax_use: sale
    applicable_type: 'true'
    company_id: base.main_company
-
  1.3 I create IVA purchase tax (withholdable)
-
  !record {model: account.tax, id: iva_purchase1}:
    name: 'IVA - Purchase (withholdable)'
    amount: 0.12
    type_tax_use: purchase
    applicable_type: 'true'
    company_id: base.main_company
